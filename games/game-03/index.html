<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dungeon Crawler</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Courier New', monospace;
      background: #1a1a1a;
      color: #e0e0e0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
    }
    #game-container {
      max-width: 600px;
      width: 100%;
      background: #2a2a2a;
      border: 2px solid #444;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    }
    h1 {
      color: #ff6b6b;
      text-align: center;
      margin-bottom: 20px;
      font-size: 24px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    #dungeon {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
      margin-bottom: 20px;
      background: #1a1a1a;
      padding: 15px;
      border-radius: 5px;
    }
    .cell {
      aspect-ratio: 1;
      background: #333;
      border: 1px solid #555;
      border-radius: 3px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .cell:hover {
      background: #444;
      transform: scale(1.05);
    }
    .cell.player { background: #4a9eff; border-color: #6bb0ff; }
    .cell.enemy { background: #ff4757; border-color: #ff6b7a; }
    .cell.treasure { background: #ffd93d; border-color: #ffe66d; }
    .cell.exit { background: #6bcf7f; border-color: #8adb9a; }
    .cell.wall { background: #222; border-color: #111; cursor: default; }
    .cell.visited { background: #2a2a2a; }
    #stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }
    .stat {
      background: #1a1a1a;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
      border: 1px solid #444;
    }
    .stat-label {
      font-size: 11px;
      color: #888;
      text-transform: uppercase;
      margin-bottom: 5px;
    }
    .stat-value {
      font-size: 18px;
      font-weight: bold;
      color: #fff;
    }
    #message {
      background: #1a1a1a;
      padding: 12px;
      border-radius: 5px;
      min-height: 60px;
      margin-bottom: 15px;
      border: 1px solid #444;
      line-height: 1.5;
    }
    #controls {
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    button {
      background: #4a9eff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-family: inherit;
      font-size: 14px;
      font-weight: bold;
      transition: background 0.2s;
    }
    button:hover {
      background: #3a8eef;
    }
    button:active {
      transform: scale(0.95);
    }
    .game-over {
      color: #ff4757;
      font-weight: bold;
    }
    .victory {
      color: #6bcf7f;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <h1>‚öîÔ∏è Dungeon Crawler ‚öîÔ∏è</h1>
    <div id="stats">
      <div class="stat">
        <div class="stat-label">Health</div>
        <div class="stat-value" id="health">100</div>
      </div>
      <div class="stat">
        <div class="stat-label">Gold</div>
        <div class="stat-value" id="gold">0</div>
      </div>
      <div class="stat">
        <div class="stat-label">Level</div>
        <div class="stat-value" id="level">1</div>
      </div>
    </div>
    <div id="message">Welcome, adventurer! Navigate the dungeon using arrow keys or click adjacent cells. Find the exit to advance!</div>
    <div id="dungeon"></div>
    <div id="controls">
      <button onclick="newGame()">New Game</button>
    </div>
  </div>

  <script>
    const GRID_SIZE = 5;
    const CELL_TYPES = {
      EMPTY: 0,
      WALL: 1,
      PLAYER: 2,
      ENEMY: 3,
      TREASURE: 4,
      EXIT: 5
    };

    let grid = [];
    let playerPos = { x: 0, y: 0 };
    let health = 100;
    let gold = 0;
    let level = 1;
    let gameActive = true;
    let visited = new Set();

    function createDungeon() {
      grid = Array(GRID_SIZE).fill().map(() => Array(GRID_SIZE).fill(CELL_TYPES.EMPTY));
      
      // Add some walls
      const wallCount = Math.min(level + 2, 8);
      for (let i = 0; i < wallCount; i++) {
        const x = Math.floor(Math.random() * GRID_SIZE);
        const y = Math.floor(Math.random() * GRID_SIZE);
        if (x !== 0 || y !== 0) grid[y][x] = CELL_TYPES.WALL;
      }
      
      // Add enemies
      const enemyCount = Math.min(level + 1, 5);
      for (let i = 0; i < enemyCount; i++) {
        placeRandom(CELL_TYPES.ENEMY);
      }
      
      // Add treasure
      const treasureCount = Math.min(level, 3);
      for (let i = 0; i < treasureCount; i++) {
        placeRandom(CELL_TYPES.TREASURE);
      }
      
      // Place exit
      placeRandom(CELL_TYPES.EXIT);
      
      // Player starts at top-left
      playerPos = { x: 0, y: 0 };
      grid[0][0] = CELL_TYPES.PLAYER;
      visited.clear();
      visited.add('0,0');
    }

    function placeRandom(type) {
      let placed = false;
      let attempts = 0;
      while (!placed && attempts < 50) {
        const x = Math.floor(Math.random() * GRID_SIZE);
        const y = Math.floor(Math.random() * GRID_SIZE);
        if (grid[y][x] === CELL_TYPES.EMPTY && !(x === 0 && y === 0)) {
          grid[y][x] = type;
          placed = true;
        }
        attempts++;
      }
    }

    function render() {
      const dungeon = document.getElementById('dungeon');
      dungeon.innerHTML = '';
      
      for (let y = 0; y < GRID_SIZE; y++) {
        for (let x = 0; x < GRID_SIZE; x++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.dataset.x = x;
          cell.dataset.y = y;
          
          if (visited.has(`${x},${y}`)) {
            cell.classList.add('visited');
          }
          
          const type = grid[y][x];
          switch(type) {
            case CELL_TYPES.PLAYER:
              cell.classList.add('player');
              cell.textContent = 'üßô';
              break;
            case CELL_TYPES.WALL:
              cell.classList.add('wall');
              cell.textContent = 'üß±';
              break;
            case CELL_TYPES.ENEMY:
              cell.classList.add('enemy');
              cell.textContent = 'üëπ';
              break;
            case CELL_TYPES.TREASURE:
              cell.classList.add('treasure');
              cell.textContent = 'üí∞';
              break;
            case CELL_TYPES.EXIT:
              cell.classList.add('exit');
              cell.textContent = 'üö™';
              break;
          }
          
          cell.addEventListener('click', () => handleCellClick(x, y));
          dungeon.appendChild(cell);
        }
      }
      
      updateStats();
    }

    function handleCellClick(x, y) {
      if (!gameActive) return;
      
      const dx = Math.abs(x - playerPos.x);
      const dy = Math.abs(y - playerPos.y);
      
      // Only allow adjacent moves (not diagonal)
      if ((dx === 1 && dy === 0) || (dx === 0 && dy === 1)) {
        movePlayer(x - playerPos.x, y - playerPos.y);
      }
    }

    function movePlayer(dx, dy) {
      if (!gameActive) return;
      
      const newX = playerPos.x + dx;
      const newY = playerPos.y + dy;
      
      if (newX < 0 || newX >= GRID_SIZE || newY < 0 || newY >= GRID_SIZE) return;
      
      const target = grid[newY][newX];
      
      if (target === CELL_TYPES.WALL) {
        showMessage("You can't walk through walls!");
        return;
      }
      
      grid[playerPos.y][playerPos.x] = CELL_TYPES.EMPTY;
      
      if (target === CELL_TYPES.ENEMY) {
        const damage = 15 + Math.floor(Math.random() * 20);
        health -= damage;
        showMessage(`You fought an enemy! Lost ${damage} health.`);
        if (health <= 0) {
          gameOver();
          return;
        }
      } else if (target === CELL_TYPES.TREASURE) {
        const goldFound = 10 + Math.floor(Math.random() * 30);
        gold += goldFound;
        showMessage(`You found ${goldFound} gold!`);
      } else if (target === CELL_TYPES.EXIT) {
        nextLevel();
        return;
      }
      
      playerPos = { x: newX, y: newY };
      grid[newY][newX] = CELL_TYPES.PLAYER;
      visited.add(`${newX},${newY}`);
      render();
    }

    function nextLevel() {
      level++;
      health = Math.min(health + 20, 100);
      showMessage(`<span class="victory">Level ${level} reached! Health restored.</span>`);
      createDungeon();
      render();
    }

    function gameOver() {
      gameActive = false;
      showMessage(`<span class="game-over">Game Over! You reached level ${level} with ${gold} gold. Click New Game to restart.</span>`);
      render();
    }

    function showMessage(msg) {
      document.getElementById('message').innerHTML = msg;
    }

    function updateStats() {
      document.getElementById('health').textContent = health;
      document.getElementById('gold').textContent = gold;
      document.getElementById('level').textContent = level;
    }

    function newGame() {
      health = 100;
      gold = 0;
      level = 1;
      gameActive = true;
      createDungeon();
      render();
      showMessage("Welcome, adventurer! Navigate the dungeon using arrow keys or click adjacent cells. Find the exit to advance!");
    }

    // Keyboard controls
    document.addEventListener('keydown', (e) => {
      if (!gameActive) return;
      
      switch(e.key) {
        case 'ArrowUp':
          e.preventDefault();
          movePlayer(0, -1);
          break;
        case 'ArrowDown':
          e.preventDefault();
          movePlayer(0, 1);
          break;
        case 'ArrowLeft':
          e.preventDefault();
          movePlayer(-1, 0);
          break;
        case 'ArrowRight':
          e.preventDefault();
          movePlayer(1, 0);
          break;
      }
    });

    // Initialize game
    newGame();
  </script>
</body>
</html>
